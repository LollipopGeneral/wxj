bg-color = hsl(72, 78%, 80%)
nav-text-color = hsl(72, 78%, 45%)
highlight-bg-color = hsl(72, 78%, 85%)
orig-status-bg-color = hsl(72, 78%, 70%)
hr-color = hsl(72, 78%, 45%)
img-placeholder-color = hsl(72, 78%, 55%)
article-link-color = hsl(72, 78%, 40%)
article-blockquote-color = hsl(72, 78%, 70%)
article-table-border-color = hsl(72, 78%, 40%)
article-table-key-background = hsl(72, 78%, 70%)
dim-color = #888
translucent = rgba(255, 255, 255, 0.5)  // Use 50% transparency to emulate translucency
font = 16px "Times New Roman", Times, "Songti SC", SimSum, serif
mobile-nav-bg-color = hsl(72, 78%, 45%)
mobile-nav-text-color = hsl(72, 78%, 85%)

with-bottom-border()
  border-bottom solid 1px

no-bottom-border()
  border-bottom none

emojis()
  img
    width 18px
    height 18px
    position relative
    bottom 1px

*
  -webkit-tap-highlight-color transparent

body
  margin 0 auto
  padding 20px 0 30px 0
  width 620px
  font font
  text-align justify
  background bg-color

h1
  text-align center
  font-size 140%

h2
  font-size 120%

header#title
  margin 1em 0
  h1
    margin 5px 0
  p.subheading
    margin 5px 0
    text-align center
    font-weight bold

a
  color inherit
  text-decoration none
  with-bottom-border()

  &.fancybox-close
    no-bottom-border()

hr
  margin 0 10px
  border 0
  border-top 1px solid hr-color

img
  vertical-align middle

.left
  float left

.right
  float right

.clear:after
  content ""
  display block
  height 0
  clear both
  visibility hidden

.clickable
  with-bottom-border()
  &:hover
    cursor pointer

nav
  position fixed
  left calc(50% + 360px)
  top calc(50% - 70px)
  font-size 110%
  line-height 160%
  color nav-text-color
  .menu-toggle
    display none
  a
    no-bottom-border()

.info-nav-bar
  margin 5px 10px
  font-size 80%
  &-nav
    margin-left 3px
  & input
    font inherit
    width 1.2em
    padding 0 2px
    border 1px solid hr-color
    border-radius 2px
    text-align center

.status
  padding 8px 10px
  &.highlight
    background highlight-bg-color
    box-shadow 0 0 2px 1px hr-color

  & time
    font-size 75%
    color dim-color

.status-text
  margin 5px 0
  emojis()

.orig-post
  padding 5px 10px
  background orig-status-bg-color
  emojis()

.gallery
  margin 7px 0 5px 0

  &.grid1
    width 122px
  &.grid2, &.grid4
    width 244px
  &.standalone // on /gallery
    margin 10px auto
    width 610px
  width 366px // default

  a
    float left
    padding 1px
    no-bottom-border()

  img
    display block
    width 120px
    height 120px
    // Color of rectangle and alt text of not-yet-loaded images
    color rgba(0,0,0,0)  // hide
    background img-placeholder-color

.fancybox
  position relative
  &:focus
    outline 0
  .gif-indicator
    position absolute
    left 5%
    top 5%
    font-family Helvetica, Arial, sans-serif
    font-size 12px
    color white

fancybox-button-before-svg(filename, size)
  width 44px
  height 44px
  position relative
  background embedurl("images/icons/"filename) center/size no-repeat

.fancybox-button
  &.fancybox-open-image:before
    fancybox-button-before-svg("open.svg", 14px)

.loading
  margin 10px 0
  text-align center
  font-size 120%
  &:after
    overflow hidden
    display inline-block
    vertical-align bottom
    animation ellipsis steps(4,end) 1s infinite
    content "\2026"  // U+2026 HORIZONTAL ELLIPSIS
    width 0
  &.fail:after
    all initial

@keyframes ellipsis
  to
    width 1.5em

main.article
  p
    margin 0.5em 0
  blockquote
    background article-blockquote-color
    padding 0.5em 1em
    margin 0.5em 0
  a
    border none
    color article-link-color
  hr
    margin 0
  table
    margin 0.5em 0
    border-collapse collapse
    border 1px solid article-table-border-color
    th, td
      border 1px solid article-table-border-color
      padding 1px 3px
    th.key, td.key
      background article-table-key-background
      min-width 4em
  img.portrait
    float right
    // Override background color of e.g. blockquote around the image
    padding 0 0 10px 10px
    background bg-color
    z-index 1

#audio-control
  position fixed
  left calc(50% + 366px)
  bottom 30px
  &:hover
    cursor pointer
  &:before
    width 24px
    height 24px
    display inline-block
    vertical-align middle
    background embedurl("images/icons/play-circle.svg") center/24px no-repeat
    content ""
  &.playing:before
    background-image embedurl("images/icons/pause-circle.svg")

@media screen and (max-width: 879px)
  body
    padding-top 50px
    width 100%
    max-width 620px
  nav
    left 0
    top 0
    height 32px
    width 100%
    background mobile-nav-bg-color
    z-index 1
    .menu-toggle
      position relative
      left calc(50% - 310px)
      height 24px
      width 18px
      padding 4px 10px
      display block
      &:before
        display block
        content ""
        background-image embedurl("images/icons/hamburger.svg")
        background-size 18px 24px
        height 24px
        width 18px
      &:hover
        cursor pointer
    .menu
      position relative
      left calc(50% - 300px)
      width 100px
      color mobile-nav-text-color
      text-align center
      display none
      div
        padding 5px
        border-top solid 1px translucent
        background mobile-nav-bg-color
        background-clip padding-box
  main.article
    margin 0 10px
  #audio-control
    left initial
    bottom initial
    right 6px
    top 6px
    z-index 1
    &:before
      width 20px
      height 20px
      background embedurl("images/icons/play-circle-mobile.svg") center/20px no-repeat
    &.playing:before
      background-image embedurl("images/icons/pause-circle-mobile.svg")

@media screen and (max-width: 619px)
  nav
    .menu-toggle
      left 0
    .menu
      left 10px
  .gallery.standalone
    width 488px

@media screen and (max-width: 487px)
  .gallery.standalone
    width 366px
